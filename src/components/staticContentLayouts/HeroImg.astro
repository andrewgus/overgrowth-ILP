---
import BaseImage from '../base/BaseImage.astro'
import { nanoid } from 'nanoid'

type Props = {
	imgName: string
	altText?: string
	caption?: string
}
const { imgName, altText = '', caption } = Astro.props

const needID = !!caption ? `${Astro.self.name}-${nanoid(8)}` : ''
---

<div class='fullWidth'>
	<BaseImage describedBy={needID} imgName={imgName} altText={altText} />
	{
		!!caption && (
			<p id={needID} class='imgCaption'>
				<small>{caption}</small>
			</p>
		)
	}
</div>

<style lang='scss'>
	:global(img) {
		width: 100%;
	}
	.imgCaption {
		display: block;
		text-align: center;
		font-style: italic;
		margin: var(--s-4) auto 0;
	}
</style>
