---
type Props = {
	title: string
}
const { title } = Astro.props
---

<script>
	const details = document.querySelectorAll<HTMLDetailsElement>('.accordion')
	details.forEach((detail) => {
		const summaryBtn = detail.firstElementChild as HTMLButtonElement
		summaryBtn.addEventListener('click', () => {
			summaryBtn.setAttribute('aria-expanded', detail.open ? 'false' : 'true')
		})
	})
</script>

<details class='accordion'>
	<summary aria-expanded='false' tabindex='0' role='button'>{title}</summary>
	<slot />
</details>

<style lang='scss'>
	.accordion {
		&[open] {
			summary {
				border-bottom: 1px dashed var(--darkGray);
			}
		}
		border: 1px solid var(--darkGray);
		&:first-of-type:last-of-type {
			border-radius: var(--s-5);
		}
		&:first-of-type {
			border-radius: var(--s-5) var(--s-5) 0 0;
		}
		&:last-of-type {
			border-radius: 0 0 var(--s-5) var(--s-5);
		}
		+ .accordion {
			margin-top: 0;
		}
	}
</style>
