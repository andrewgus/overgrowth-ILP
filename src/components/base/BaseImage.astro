---
type Props = {
	imgName: string
	altText?: string
	describedBy?: string
}

const imageFilePath = `https://fscjcel.blob.core.windows.net/ilp-assets/${Astro.url.pathname
	.split('/')
	.at(3)}`

const { imgName, altText = '', describedBy } = Astro.props
// TODO: Talk with team about 2x images not properly falling back. If we can always gaurantee a 2x copy, then we can implement, but I wouldn't want to implement if we don't think it will always be done correctly. Not enough room for error.
---

<picture>
	<source
		type='image/avif'
		srcset=`${imageFilePath}_${imgName.split('.').at(0)}.avif`
	/>
	<source
		type='image/webp'
		srcset=`${imageFilePath}_${imgName.split('.').at(0)}.webp`
	/>
	<source
		type=`image/${imgName.split('.').at(-1)}`
		srcset=`${imageFilePath}_${imgName}`
	/>
	<img
		src=`${imageFilePath}_${imgName}`
		alt={altText}
		aria-describedby={describedBy}
	/>
</picture>

<style lang='scss'>
	picture {
		width: inherit;
		max-width: 100%;
		max-height: 85vh;
		> img {
			object-fit: contain;
			width: inherit;
			max-width: inherit;
			max-height: inherit;
		}
	}
</style>
